function addingEventListenerToFetchTokenButton() {
  document
    .getElementById("fetchTokenButton")
    .addEventListener("click", function () {
      doGetAjaxCall(fetchTokenCallBack, getUrlForVulnerabilityLevel(), true);
    });
}
addingEventListenerToFetchTokenButton();

function addingEventListenerToVerifyToken() {
  document.getElementById("verifyToken").addEventListener("click", function () {
    let url = getUrlForVulnerabilityLevel();
    url = url + "?JWT=" + document.getElementById("jwt").value;
    console.log(url);
    console.log(document.getElementById("jwt").value);
    doGetAjaxCall(updateUIWithVerifyResponse, url, true);
  });
}
addingEventListenerToVerifyToken();

function updateUIWithVerifyResponse(data) {
  if (data.isValid) {
    document.getElementById("verificationResponse").innerHTML = "JWT is valid";
  } else {
    document.getElementById("verificationResponse").innerHTML =
      "JWT: " + data.content + " is not valid. Please try again";
  }
}

function fetchTokenCallBack(data) {
  document.getElementById("jwt").value = data.content;
  document.getElementById("description").style.visibility = "visible";
}
